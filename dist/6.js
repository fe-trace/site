(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{146:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<h2 id=\\\"webpack\\\">webpack 模块加载</h2>\\n<p>webpack 将源码编译过后，将源码拆分成 chunk，最后输出结果。最终结果在生成时添加了许多模块化相关的代码，下面将介绍 webpack 编译后的模块以及如何做模块加载。</p>\\n<h3 id=\\\"\\\">模块类型</h3>\\n<ul>\\n<li>初始化模块：页面初始化时需要加载的模块</li>\\n<li>动态加载模块：动态引用的模块</li>\\n</ul>\\n<h3 id=\\\"-1\\\">初始化模块</h3>\\n<p>执行流程：新增一个对象，传入对象到具体模块中执行，将模块导出的数据保存在对象中，并缓存在内存中</p>\\n<pre><code>function __webpack_require__(moduleId) {\\n    // 判断模块是否已经加载，已经加载直接返回模块的 exports 对象\\n    if(installedModules[moduleId]) {\\n        return installedModules[moduleId].exports;\\n    }\\n    // 创建一个模块对象，并保存在内存中\\n    var module = installedModules[moduleId] = {\\n        i: moduleId,\\n        l: false,\\n        exports: {}\\n    };\\n    // 传入创建的模块对象，并执行模块代码\\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n    // 设置模块已经加载完成标示\\n    module.l = true;\\n    // 返回模块的 exports 对象\\n    return module.exports;\\n}\\n</code></pre>\\n<h3 id=\\\"-2\\\">动态加载</h3>\\n<p>执行流程：动态加载模块分为两个过程，先将模块代码请求到本地，完成之后再执行一次模块的加载过程（和初始化模块加载逻辑一致）。整个过程通过 promise 来完成，请求异步模块时会创建一个 promise。并将 promise 返回给调用者。在模块加载完成后自动执行，执行过程会改变之前生成 promise 的状态。异步模块的调用者持有 promise 的引用所以会得到通知，从而再以初始化加载模块的方式得到异步模块的返回值。</p>\\n<pre><code>__webpack_require__.e = function requireEnsure(chunkId) {\\n    var promises = [];\\n    var installedChunkData = installedChunks[chunkId];\\n    // 判断模块是否已经加载（重复加载异步模块的情况）\\n    if(installedChunkData !== 0) {\\n\\n        // 模块当前正在加载\\n        if(installedChunkData) {\\n            promises.push(installedChunkData[2]);\\n        } else {\\n            // 创建一个 promise 用来做模块加载通知（将 promise 的 resolve 回调保存起来）\\n            var promise = new Promise(function(resolve, reject) {\\n                installedChunkData = installedChunks[chunkId] = [resolve, reject];\\n            });\\n            // 保存创建的 promise ，用来返回给加载异步模块的调用者\\n            promises.push(installedChunkData[2] = promise);\\n            // 新增 script 标签用来加载 JS 模块\\n            var script = document.createElement('script');\\n            var onScriptComplete;\\n            script.charset = 'utf-8';\\n            script.timeout = 120;\\n            if (__webpack_require__.nc) {\\n                script.setAttribute(\\\"nonce\\\", __webpack_require__.nc);\\n            }\\n            script.src = jsonpScriptSrc(chunkId);\\n            var error = new Error();\\n            onScriptComplete = function (event) {\\n                script.onerror = script.onload = null;\\n                clearTimeout(timeout);\\n                var chunk = installedChunks[chunkId];\\n                if(chunk !== 0) {\\n                    if(chunk) {\\n                        var errorType = event &amp;&amp; (event.type === 'load' ? 'missing' : event.type);\\n                        var realSrc = event &amp;&amp; event.target &amp;&amp; event.target.src;\\n                        error.message = 'Loading chunk ' + chunkId + ' failed.\\\\n(' + errorType + ': ' + realSrc + ')';\\n                        error.name = 'ChunkLoadError';\\n                        error.type = errorType;\\n                        error.request = realSrc;\\n                        chunk[1](error);\\n                    }\\n                    installedChunks[chunkId] = undefined;\\n                }\\n            };\\n            var timeout = setTimeout(function(){\\n                onScriptComplete({ type: 'timeout', target: script });\\n            }, 120000);\\n            script.onerror = script.onload = onScriptComplete;\\n            document.head.appendChild(script);\\n        }\\n    }\\n    // 将在异步请求模块时生成对应的 promise 返回，当请求成功，模块代码执行时会触发改变 promise 的状态，从而通知异步模块的调用者，调用者再通过加载初始化模块的方式，再加载一次异步模块\\n    return Promise.all(promises);\\n};\\n</code></pre>\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbWQvd2VicGFjay93ZWJwYWNr5qih5Z2X5Yqg6L29Lm1kPzRhNWUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI8aDIgaWQ9XFxcIndlYnBhY2tcXFwiPndlYnBhY2sg5qih5Z2X5Yqg6L29PC9oMj5cXG48cD53ZWJwYWNrIOWwhua6kOeggee8luivkei/h+WQju+8jOWwhua6kOeggeaLhuWIhuaIkCBjaHVua++8jOacgOWQjui+k+WHuue7k+aenOOAguacgOe7iOe7k+aenOWcqOeUn+aIkOaXtua3u+WKoOS6huiuuOWkmuaooeWdl+WMluebuOWFs+eahOS7o+egge+8jOS4i+mdouWwhuS7i+e7jSB3ZWJwYWNrIOe8luivkeWQjueahOaooeWdl+S7peWPiuWmguS9leWBmuaooeWdl+WKoOi9veOAgjwvcD5cXG48aDMgaWQ9XFxcIlxcXCI+5qih5Z2X57G75Z6LPC9oMz5cXG48dWw+XFxuPGxpPuWIneWni+WMluaooeWdl++8mumhtemdouWIneWni+WMluaXtumcgOimgeWKoOi9veeahOaooeWdlzwvbGk+XFxuPGxpPuWKqOaAgeWKoOi9veaooeWdl++8muWKqOaAgeW8leeUqOeahOaooeWdlzwvbGk+XFxuPC91bD5cXG48aDMgaWQ9XFxcIi0xXFxcIj7liJ3lp4vljJbmqKHlnZc8L2gzPlxcbjxwPuaJp+ihjOa1geeoi++8muaWsOWinuS4gOS4quWvueixoe+8jOS8oOWFpeWvueixoeWIsOWFt+S9k+aooeWdl+S4reaJp+ihjO+8jOWwhuaooeWdl+WvvOWHuueahOaVsOaNruS/neWtmOWcqOWvueixoeS4re+8jOW5tue8k+WtmOWcqOWGheWtmOS4rTwvcD5cXG48cHJlPjxjb2RlPmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcXG4gICAgLy8g5Yik5pat5qih5Z2X5piv5ZCm5bey57uP5Yqg6L2977yM5bey57uP5Yqg6L2955u05o6l6L+U5Zue5qih5Z2X55qEIGV4cG9ydHMg5a+56LGhXFxuICAgIGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XFxuICAgICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcXG4gICAgfVxcbiAgICAvLyDliJvlu7rkuIDkuKrmqKHlnZflr7nosaHvvIzlubbkv53lrZjlnKjlhoXlrZjkuK1cXG4gICAgdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xcbiAgICAgICAgaTogbW9kdWxlSWQsXFxuICAgICAgICBsOiBmYWxzZSxcXG4gICAgICAgIGV4cG9ydHM6IHt9XFxuICAgIH07XFxuICAgIC8vIOS8oOWFpeWIm+W7uueahOaooeWdl+Wvueixoe+8jOW5tuaJp+ihjOaooeWdl+S7o+eggVxcbiAgICBtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcXG4gICAgLy8g6K6+572u5qih5Z2X5bey57uP5Yqg6L295a6M5oiQ5qCH56S6XFxuICAgIG1vZHVsZS5sID0gdHJ1ZTtcXG4gICAgLy8g6L+U5Zue5qih5Z2X55qEIGV4cG9ydHMg5a+56LGhXFxuICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cztcXG59XFxuPC9jb2RlPjwvcHJlPlxcbjxoMyBpZD1cXFwiLTJcXFwiPuWKqOaAgeWKoOi9vTwvaDM+XFxuPHA+5omn6KGM5rWB56iL77ya5Yqo5oCB5Yqg6L295qih5Z2X5YiG5Li65Lik5Liq6L+H56iL77yM5YWI5bCG5qih5Z2X5Luj56CB6K+35rGC5Yiw5pys5Zyw77yM5a6M5oiQ5LmL5ZCO5YaN5omn6KGM5LiA5qyh5qih5Z2X55qE5Yqg6L296L+H56iL77yI5ZKM5Yid5aeL5YyW5qih5Z2X5Yqg6L296YC76L6R5LiA6Ie077yJ44CC5pW05Liq6L+H56iL6YCa6L+HIHByb21pc2Ug5p2l5a6M5oiQ77yM6K+35rGC5byC5q2l5qih5Z2X5pe25Lya5Yib5bu65LiA5LiqIHByb21pc2XjgILlubblsIYgcHJvbWlzZSDov5Tlm57nu5nosIPnlKjogIXjgILlnKjmqKHlnZfliqDovb3lrozmiJDlkI7oh6rliqjmiafooYzvvIzmiafooYzov4fnqIvkvJrmlLnlj5jkuYvliY3nlJ/miJAgcHJvbWlzZSDnmoTnirbmgIHjgILlvILmraXmqKHlnZfnmoTosIPnlKjogIXmjIHmnIkgcHJvbWlzZSDnmoTlvJXnlKjmiYDku6XkvJrlvpfliLDpgJrnn6XvvIzku47ogIzlho3ku6XliJ3lp4vljJbliqDovb3mqKHlnZfnmoTmlrnlvI/lvpfliLDlvILmraXmqKHlnZfnmoTov5Tlm57lgLzjgII8L3A+XFxuPHByZT48Y29kZT5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQpIHtcXG4gICAgdmFyIHByb21pc2VzID0gW107XFxuICAgIHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XFxuICAgIC8vIOWIpOaWreaooeWdl+aYr+WQpuW3sue7j+WKoOi9ve+8iOmHjeWkjeWKoOi9veW8guatpeaooeWdl+eahOaDheWGte+8iVxcbiAgICBpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHtcXG5cXG4gICAgICAgIC8vIOaooeWdl+W9k+WJjeato+WcqOWKoOi9vVxcbiAgICAgICAgaWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XFxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAvLyDliJvlu7rkuIDkuKogcHJvbWlzZSDnlKjmnaXlgZrmqKHlnZfliqDovb3pgJrnn6XvvIjlsIYgcHJvbWlzZSDnmoQgcmVzb2x2ZSDlm57osIPkv53lrZjotbfmnaXvvIlcXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xcbiAgICAgICAgICAgICAgICBpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAvLyDkv53lrZjliJvlu7rnmoQgcHJvbWlzZSDvvIznlKjmnaXov5Tlm57nu5nliqDovb3lvILmraXmqKHlnZfnmoTosIPnlKjogIVcXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xcbiAgICAgICAgICAgIC8vIOaWsOWiniBzY3JpcHQg5qCH562+55So5p2l5Yqg6L29IEpTIOaooeWdl1xcbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcXG4gICAgICAgICAgICB2YXIgb25TY3JpcHRDb21wbGV0ZTtcXG4gICAgICAgICAgICBzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XFxuICAgICAgICAgICAgc2NyaXB0LnRpbWVvdXQgPSAxMjA7XFxuICAgICAgICAgICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcXG4gICAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShcXFwibm9uY2VcXFwiLCBfX3dlYnBhY2tfcmVxdWlyZV9fLm5jKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IGpzb25wU2NyaXB0U3JjKGNodW5rSWQpO1xcbiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcigpO1xcbiAgICAgICAgICAgIG9uU2NyaXB0Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcXG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xcbiAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XFxuICAgICAgICAgICAgICAgIGlmKGNodW5rICE9PSAwKSB7XFxuICAgICAgICAgICAgICAgICAgICBpZihjaHVuaykge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnJvclR5cGUgPSBldmVudCAmYW1wOyZhbXA7IChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhbFNyYyA9IGV2ZW50ICZhbXA7JmFtcDsgZXZlbnQudGFyZ2V0ICZhbXA7JmFtcDsgZXZlbnQudGFyZ2V0LnNyYztcXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXFxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua1sxXShlcnJvcik7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xcbiAgICAgICAgICAgICAgICBvblNjcmlwdENvbXBsZXRlKHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KTtcXG4gICAgICAgICAgICB9LCAxMjAwMDApO1xcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGU7XFxuICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIC8vIOWwhuWcqOW8guatpeivt+axguaooeWdl+aXtueUn+aIkOWvueW6lOeahCBwcm9taXNlIOi/lOWbnu+8jOW9k+ivt+axguaIkOWKn++8jOaooeWdl+S7o+eggeaJp+ihjOaXtuS8muinpuWPkeaUueWPmCBwcm9taXNlIOeahOeKtuaAge+8jOS7juiAjOmAmuefpeW8guatpeaooeWdl+eahOiwg+eUqOiAhe+8jOiwg+eUqOiAheWGjemAmui/h+WKoOi9veWIneWni+WMluaooeWdl+eahOaWueW8j++8jOWGjeWKoOi9veS4gOasoeW8guatpeaooeWdl1xcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xcbn07XFxuPC9jb2RlPjwvcHJlPlwiOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///146\n")}}]);