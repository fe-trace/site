(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./md/webpack/webpack-dev-server.md":
/*!******************************************!*\
  !*** ./md/webpack/webpack-dev-server.md ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<h2 id=\\\"webpackdevserver\\\">webpack-dev-server</h2>\\n<p>webpack-dev-server 用于在开发过程中实现热替换功能，笔者用的比较多，但是对于原理不是太了解，现准备深入了解下其实现原理。</p>\\n<h3 id=\\\"\\\">配置</h3>\\n<pre><code>{\\n    devServer: {\\n        hot/hotOnly: true,\\n        port: 9000,\\n        compress: true,\\n        contentBase: path.join(__dirname, \\\"dist\\\"),\\n    }\\n    ...\\n}\\n</code></pre>\\n<p>备注：hot-代码更新会刷新页面，hotOnly-代码更新不会刷新页面</p>\\n<h3 id=\\\"-1\\\">使用</h3>\\n<pre><code>webpack-dev-server --config\\n</code></pre>\\n<p>备注：webpack-cli 默认的配置文件是 (webpack.config|webpackfile)(.js|.json|.ts|..) 匹配结果</p>\\n<h3 id=\\\"webpack\\\">webpack</h3>\\n<p>在说具体流程之前需要先了解一点点 webpack 的实现原理。</p>\\n<ul>\\n<li>webpack 加载配置文件实例化生成 compiler 对象</li>\\n<li>webpack 执行过程像一条流水线，每个阶段执行完成会触发 compiler.hooks 对象上的回调函数，通过在 hooks 对象上注册事件回调，可以获取编译后的文件信息</li>\\n</ul>\\n<h3 id=\\\"-2\\\">实现流程</h3>\\n<p>webpack-dev-server/lib/Server.js 部分源码</p>\\n<pre><code>constructor(compiler, options = {}, _log) {\\n    // webpack 实例对象 compiler \\n    this.compiler = compiler;\\n\\n    // 解析 webpack.config.js 得到的配置信息\\n    this.options = options;\\n\\n    // socket server 的实现模块，用来在 node 端启动一个 socket 服务和前端通信\\n    this.socketServerImplementation = getSocketServerImplementation(\\n        this.options\\n    );\\n\\n    // 保存前端建立的socket链接，编译完成后用来发送消息通知前端重新拉取代码\\n    this.sockets = [];\\n\\n    // 在 compiler 对象上监听 comiple/invalid/done 事件，用以通知前端获取更新\\n    this.setupHooks();\\n\\n    // 实例化一个 express 作为 http 服务\\n    this.setupApp();\\n\\n    // 生成中间件保存在 this.middleware 上。所有资源请求都会在其中被拦截，然后从 compiler 对象中获取对应请求的内容并返回\\n    this.setupDevMiddleware();\\n\\n    // 将生成的中间件和 express 实例结合\\n    routes(this.app, this.middleware, this.options);\\n\\n    // 将 express 对象传给 http.createServer 调用 listen 方法，监听到具体端口上，http 服务启动完成\\n    this.createServer();\\n}\\n</code></pre>\\n<h3 id=\\\"-3\\\">静态资源服务实现细节</h3>\\n<p>首次加载过程</p>\\n<ul>\\n<li>this.setupDevMiddleware 执行过程会生成 express 中间件。webpack编译完成之后会将 done 事件返回的静态资源对象保存在 context.webpackStats 对象上</li>\\n<li>express 加载生成的中间件启动静态资源服务</li>\\n<li>所有静态资源请求被中间件拦截，通过URL从 webpackStats 中获取具体的内容并返回</li>\\n<li>首次加载流程完成</li>\\n<li>前端加载完成后建立 socket 链接</li>\\n<li>node 端响应 socket 链接并保存</li>\\n</ul>\\n<p>更新过程</p>\\n<ul>\\n<li>this.setupHooks 监听了 compiler 中的 done 事件，代码更新之后会通过 socket 发送更新后的 hash 到前端</li>\\n<li>前端收到更新通知后获取更新的代码</li>\\n</ul>\\n<h3 id=\\\"-4\\\">总结</h3>\\n<p>webpack-dev-server 实现的核心是 webpack 提供的钩子函数，他能获取到编译之后的文件信息，再通过 express 和 middleware 拦截请求进行资源的响应。</p>\\n<h3 id=\\\"-5\\\">其他</h3>\\n<p>在阅读源码过程中发现一些以前忽略的细节：</p>\\n<ul>\\n<li>require.resolve</li>\\n<li>process API</li>\\n</ul>\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tZC93ZWJwYWNrL3dlYnBhY2stZGV2LXNlcnZlci5tZC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21kL3dlYnBhY2svd2VicGFjay1kZXYtc2VydmVyLm1kPzgxNzMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI8aDIgaWQ9XFxcIndlYnBhY2tkZXZzZXJ2ZXJcXFwiPndlYnBhY2stZGV2LXNlcnZlcjwvaDI+XFxuPHA+d2VicGFjay1kZXYtc2VydmVyIOeUqOS6juWcqOW8gOWPkei/h+eoi+S4reWunueOsOeDreabv+aNouWKn+iDve+8jOeslOiAheeUqOeahOavlOi+g+Wkmu+8jOS9huaYr+WvueS6juWOn+eQhuS4jeaYr+WkquS6huino++8jOeOsOWHhuWkh+a3seWFpeS6huino+S4i+WFtuWunueOsOWOn+eQhuOAgjwvcD5cXG48aDMgaWQ9XFxcIlxcXCI+6YWN572uPC9oMz5cXG48cHJlPjxjb2RlPntcXG4gICAgZGV2U2VydmVyOiB7XFxuICAgICAgICBob3QvaG90T25seTogdHJ1ZSxcXG4gICAgICAgIHBvcnQ6IDkwMDAsXFxuICAgICAgICBjb21wcmVzczogdHJ1ZSxcXG4gICAgICAgIGNvbnRlbnRCYXNlOiBwYXRoLmpvaW4oX19kaXJuYW1lLCBcXFwiZGlzdFxcXCIpLFxcbiAgICB9XFxuICAgIC4uLlxcbn1cXG48L2NvZGU+PC9wcmU+XFxuPHA+5aSH5rOo77yaaG90LeS7o+eggeabtOaWsOS8muWIt+aWsOmhtemdou+8jGhvdE9ubHkt5Luj56CB5pu05paw5LiN5Lya5Yi35paw6aG16Z2iPC9wPlxcbjxoMyBpZD1cXFwiLTFcXFwiPuS9v+eUqDwvaDM+XFxuPHByZT48Y29kZT53ZWJwYWNrLWRldi1zZXJ2ZXIgLS1jb25maWdcXG48L2NvZGU+PC9wcmU+XFxuPHA+5aSH5rOo77yad2VicGFjay1jbGkg6buY6K6k55qE6YWN572u5paH5Lu25pivICh3ZWJwYWNrLmNvbmZpZ3x3ZWJwYWNrZmlsZSkoLmpzfC5qc29ufC50c3wuLikg5Yy56YWN57uT5p6cPC9wPlxcbjxoMyBpZD1cXFwid2VicGFja1xcXCI+d2VicGFjazwvaDM+XFxuPHA+5Zyo6K+05YW35L2T5rWB56iL5LmL5YmN6ZyA6KaB5YWI5LqG6Kej5LiA54K554K5IHdlYnBhY2sg55qE5a6e546w5Y6f55CG44CCPC9wPlxcbjx1bD5cXG48bGk+d2VicGFjayDliqDovb3phY3nva7mlofku7blrp7kvovljJbnlJ/miJAgY29tcGlsZXIg5a+56LGhPC9saT5cXG48bGk+d2VicGFjayDmiafooYzov4fnqIvlg4/kuIDmnaHmtYHmsLTnur/vvIzmr4/kuKrpmLbmrrXmiafooYzlrozmiJDkvJrop6blj5EgY29tcGlsZXIuaG9va3Mg5a+56LGh5LiK55qE5Zue6LCD5Ye95pWw77yM6YCa6L+H5ZyoIGhvb2tzIOWvueixoeS4iuazqOWGjOS6i+S7tuWbnuiwg++8jOWPr+S7peiOt+WPlue8luivkeWQjueahOaWh+S7tuS/oeaBrzwvbGk+XFxuPC91bD5cXG48aDMgaWQ9XFxcIi0yXFxcIj7lrp7njrDmtYHnqIs8L2gzPlxcbjxwPndlYnBhY2stZGV2LXNlcnZlci9saWIvU2VydmVyLmpzIOmDqOWIhua6kOeggTwvcD5cXG48cHJlPjxjb2RlPmNvbnN0cnVjdG9yKGNvbXBpbGVyLCBvcHRpb25zID0ge30sIF9sb2cpIHtcXG4gICAgLy8gd2VicGFjayDlrp7kvovlr7nosaEgY29tcGlsZXIgXFxuICAgIHRoaXMuY29tcGlsZXIgPSBjb21waWxlcjtcXG5cXG4gICAgLy8g6Kej5p6QIHdlYnBhY2suY29uZmlnLmpzIOW+l+WIsOeahOmFjee9ruS/oeaBr1xcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcblxcbiAgICAvLyBzb2NrZXQgc2VydmVyIOeahOWunueOsOaooeWdl++8jOeUqOadpeWcqCBub2RlIOerr+WQr+WKqOS4gOS4qiBzb2NrZXQg5pyN5Yqh5ZKM5YmN56uv6YCa5L+hXFxuICAgIHRoaXMuc29ja2V0U2VydmVySW1wbGVtZW50YXRpb24gPSBnZXRTb2NrZXRTZXJ2ZXJJbXBsZW1lbnRhdGlvbihcXG4gICAgICAgIHRoaXMub3B0aW9uc1xcbiAgICApO1xcblxcbiAgICAvLyDkv53lrZjliY3nq6/lu7rnq4vnmoRzb2NrZXTpk77mjqXvvIznvJbor5HlrozmiJDlkI7nlKjmnaXlj5HpgIHmtojmga/pgJrnn6XliY3nq6/ph43mlrDmi4nlj5bku6PnoIFcXG4gICAgdGhpcy5zb2NrZXRzID0gW107XFxuXFxuICAgIC8vIOWcqCBjb21waWxlciDlr7nosaHkuIrnm5HlkKwgY29taXBsZS9pbnZhbGlkL2RvbmUg5LqL5Lu277yM55So5Lul6YCa55+l5YmN56uv6I635Y+W5pu05pawXFxuICAgIHRoaXMuc2V0dXBIb29rcygpO1xcblxcbiAgICAvLyDlrp7kvovljJbkuIDkuKogZXhwcmVzcyDkvZzkuLogaHR0cCDmnI3liqFcXG4gICAgdGhpcy5zZXR1cEFwcCgpO1xcblxcbiAgICAvLyDnlJ/miJDkuK3pl7Tku7bkv53lrZjlnKggdGhpcy5taWRkbGV3YXJlIOS4iuOAguaJgOaciei1hOa6kOivt+axgumDveS8muWcqOWFtuS4reiiq+aLpuaIqu+8jOeEtuWQjuS7jiBjb21waWxlciDlr7nosaHkuK3ojrflj5blr7nlupTor7fmsYLnmoTlhoXlrrnlubbov5Tlm55cXG4gICAgdGhpcy5zZXR1cERldk1pZGRsZXdhcmUoKTtcXG5cXG4gICAgLy8g5bCG55Sf5oiQ55qE5Lit6Ze05Lu25ZKMIGV4cHJlc3Mg5a6e5L6L57uT5ZCIXFxuICAgIHJvdXRlcyh0aGlzLmFwcCwgdGhpcy5taWRkbGV3YXJlLCB0aGlzLm9wdGlvbnMpO1xcblxcbiAgICAvLyDlsIYgZXhwcmVzcyDlr7nosaHkvKDnu5kgaHR0cC5jcmVhdGVTZXJ2ZXIg6LCD55SoIGxpc3RlbiDmlrnms5XvvIznm5HlkKzliLDlhbfkvZPnq6/lj6PkuIrvvIxodHRwIOacjeWKoeWQr+WKqOWujOaIkFxcbiAgICB0aGlzLmNyZWF0ZVNlcnZlcigpO1xcbn1cXG48L2NvZGU+PC9wcmU+XFxuPGgzIGlkPVxcXCItM1xcXCI+6Z2Z5oCB6LWE5rqQ5pyN5Yqh5a6e546w57uG6IqCPC9oMz5cXG48cD7pppbmrKHliqDovb3ov4fnqIs8L3A+XFxuPHVsPlxcbjxsaT50aGlzLnNldHVwRGV2TWlkZGxld2FyZSDmiafooYzov4fnqIvkvJrnlJ/miJAgZXhwcmVzcyDkuK3pl7Tku7bjgIJ3ZWJwYWNr57yW6K+R5a6M5oiQ5LmL5ZCO5Lya5bCGIGRvbmUg5LqL5Lu26L+U5Zue55qE6Z2Z5oCB6LWE5rqQ5a+56LGh5L+d5a2Y5ZyoIGNvbnRleHQud2VicGFja1N0YXRzIOWvueixoeS4ijwvbGk+XFxuPGxpPmV4cHJlc3Mg5Yqg6L2955Sf5oiQ55qE5Lit6Ze05Lu25ZCv5Yqo6Z2Z5oCB6LWE5rqQ5pyN5YqhPC9saT5cXG48bGk+5omA5pyJ6Z2Z5oCB6LWE5rqQ6K+35rGC6KKr5Lit6Ze05Lu25oum5oiq77yM6YCa6L+HVVJM5LuOIHdlYnBhY2tTdGF0cyDkuK3ojrflj5blhbfkvZPnmoTlhoXlrrnlubbov5Tlm548L2xpPlxcbjxsaT7pppbmrKHliqDovb3mtYHnqIvlrozmiJA8L2xpPlxcbjxsaT7liY3nq6/liqDovb3lrozmiJDlkI7lu7rnq4sgc29ja2V0IOmTvuaOpTwvbGk+XFxuPGxpPm5vZGUg56uv5ZON5bqUIHNvY2tldCDpk77mjqXlubbkv53lrZg8L2xpPlxcbjwvdWw+XFxuPHA+5pu05paw6L+H56iLPC9wPlxcbjx1bD5cXG48bGk+dGhpcy5zZXR1cEhvb2tzIOebkeWQrOS6hiBjb21waWxlciDkuK3nmoQgZG9uZSDkuovku7bvvIzku6PnoIHmm7TmlrDkuYvlkI7kvJrpgJrov4cgc29ja2V0IOWPkemAgeabtOaWsOWQjueahCBoYXNoIOWIsOWJjeerrzwvbGk+XFxuPGxpPuWJjeerr+aUtuWIsOabtOaWsOmAmuefpeWQjuiOt+WPluabtOaWsOeahOS7o+eggTwvbGk+XFxuPC91bD5cXG48aDMgaWQ9XFxcIi00XFxcIj7mgLvnu5M8L2gzPlxcbjxwPndlYnBhY2stZGV2LXNlcnZlciDlrp7njrDnmoTmoLjlv4PmmK8gd2VicGFjayDmj5DkvpvnmoTpkqnlrZDlh73mlbDvvIzku5bog73ojrflj5bliLDnvJbor5HkuYvlkI7nmoTmlofku7bkv6Hmga/vvIzlho3pgJrov4cgZXhwcmVzcyDlkowgbWlkZGxld2FyZSDmi6bmiKror7fmsYLov5vooYzotYTmupDnmoTlk43lupTjgII8L3A+XFxuPGgzIGlkPVxcXCItNVxcXCI+5YW25LuWPC9oMz5cXG48cD7lnKjpmIXor7vmupDnoIHov4fnqIvkuK3lj5HnjrDkuIDkupvku6XliY3lv73nlaXnmoTnu4boioLvvJo8L3A+XFxuPHVsPlxcbjxsaT5yZXF1aXJlLnJlc29sdmU8L2xpPlxcbjxsaT5wcm9jZXNzIEFQSTwvbGk+XFxuPC91bD5cIjsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./md/webpack/webpack-dev-server.md\n");

/***/ })

}]);